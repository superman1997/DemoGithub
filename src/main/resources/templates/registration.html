<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout :: head"></head>
<nav th:replace="layout :: navbar"></nav>

<body>
<div class="container mt-5">
    <div th:if="${param.success}">
        <div class="alert alert-info">
            Đăng kí thành công
        </div>
    </div>
    <div th:if="${param.alreadyRegistered}">
        <div class="alert alert-danger">
            Số CMND đã tồn tại
        </div>
    </div>

    <h2 class="text-center mb-3">Đăng kí mới hồ sơ</h2>
    <form th:action="@{/registration}" th:object="${worker}" method="post" class="needs-validation form-center" novalidate>
        <p>Loại bảo hiểm <span style="color : red">*</span> </p>
        <div class="form-check form-check-inline mb-2">
            <input th:field="*{type}" class="form-check-input" type="radio" name="inlineRadioOptions" id="radioTypeNormal" th:value="1" required>
            <label class="form-check-label" for="radioTypeNormal">Bảo hiểm xã hội bắt buộc</label>
        </div>
        <div class="form-check form-check-inline">
            <input th:field="*{type}" class="form-check-input" type="radio" name="inlineRadioOptions" id="radioTypeVolunteer" th:value="2" required>
            <label class="form-check-label" for="radioTypeVolunteer">Bảo hiểm xã hội tự nguyện</label>
        </div>
        <div class="form-group">
            <label for="inputName">Họ và tên <span style="color : red">*</span> </label>
            <input th:field="*{fullName}" minlength="2" maxlength="50" pattern="^[a-zA-Z_ÀÁÂÃÈÉÊÌÍÒÓÔÕÙÚĂĐĨŨƠàáâãèéêìíòóôõùúăđĩũơƯĂẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼỀỀỂưăạảấầẩẫậắằẳẵặẹẻẽềềểỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪễệỉịọỏốồổỗộớờởỡợụủứừỬỮỰỲỴÝỶỸửữựỳỵỷỹ\s]+$" class="form-control" id="inputName" required type="text">
            <div class="invalid-feedback">
                Họ và tên không hợp lệ hoặc để trống
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-6 form-group">
                <label for="inputDateBirth">Ngày sinh <span style="color : red">*</span></label>
                <input autocomplete="off" th:field="*{birthDate}" class="form-control" id="inputDateBirth" required type="text">
                <div class="invalid-feedback">
                    Ngày sinh không hợp lệ hoặc để trống
                </div>
            </div>
            <div class="col-md-6 form-group">
                <label for="inputGender">Giới tính <span style="color : red">*</span></label>
                <select th:field="*{gender}" class="custom-select" id="inputGender" required>
                    <option value="">Chọn Giới tính</option>
                    <option value=1>Nam</option>
                    <option value=2>Nữ</option>
                </select>
                <div class="invalid-feedback">
                   Giới tính không hợp lệ hoặc chưa chọn
                </div>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-4 form-group">
                <label for="inputCMND">Số CMND <span style="color : red">*</span></label>
                <input th:field="*{identityNumber}" maxlength="50" pattern="[0-9]+" class="form-control" id="inputCMND" required type="tel">
                <div class="invalid-feedback">
                    Số CMND không hợp lệ hoặc để trống
                </div>
            </div>
            <div class="col-md-4 form-group">
                <label for="inputPlaceCMND">Nơi Cấp <span style="color : red">*</span></label>
                <select th:field="*{place}" data-style="''" data-style-base="form-control" class="form-control" id="inputPlaceCMND" data-live-search="true" data-live-search-style="contains" data-live-search-normalize="true" data-size="7" required>
                    <option value="">- Chọn tỉnh -</option>

                    <option value="92TTT">Thành phố Cần Thơ</option>

                    <option value="91TTT">Tỉnh Kiên Giang</option>

                    <option value="75TTT">Tỉnh Đồng Nai</option>

                    <option value="20TTT">Tỉnh Lạng Sơn</option>

                    <option value="89TTT">Tỉnh An Giang</option>

                    <option value="34TTT">Tỉnh Thái Bình</option>

                    <option value="62TTT">Tỉnh Kon Tum</option>

                    <option value="45TTT">Tỉnh Quảng Trị</option>

                    <option value="58TTT">Tỉnh Ninh Thuận</option>

                    <option value="74TTT">Tỉnh Bình Dương</option>

                    <option value="37TTT">Tỉnh Ninh Bình</option>

                    <option value="31TTT">Thành phố Hải Phòng</option>

                    <option value="95TTT">Tỉnh Bạc Liêu</option>

                    <option value="08TTT">Tỉnh Tuyên Quang</option>

                    <option value="14TTT">Tỉnh Sơn La</option>

                    <option value="36TTT">Tỉnh Nam Định</option>

                    <option value="25TTT">Tỉnh Phú Thọ</option>

                    <option value="42TTT">Tỉnh Hà Tĩnh</option>

                    <option value="93TTT">Tỉnh Hậu Giang</option>

                    <option value="82TTT">Tỉnh Tiền Giang</option>

                    <option value="66TTT">Tỉnh Đắk Lắk</option>

                    <option value="80TTT">Tỉnh Long An</option>

                    <option value="17TTT">Tỉnh Hòa Bình</option>

                    <option value="87TTT">Tỉnh Đồng Tháp</option>

                    <option value="19TTT">Tỉnh Thái Nguyên</option>

                    <option value="83TTT">Tỉnh Bến Tre</option>

                    <option value="54TTT">Tỉnh Phú Yên</option>

                    <option value="26TTT">Tỉnh Vĩnh Phúc</option>

                    <option value="94TTT">Tỉnh Sóc Trăng</option>

                    <option value="60TTT">Tỉnh Bình Thuận</option>

                    <option value="51TTT">Tỉnh Quảng Ngãi</option>

                    <option value="64TTT">Tỉnh Gia Lai</option>

                    <option value="77TTT">Tỉnh Bà Rịa - Vũng Tàu</option>

                    <option value="79TTT">Thành phố Hồ Chí Minh</option>

                    <option value="02TTT">Tỉnh Hà Giang</option>

                    <option value="68TTT">Tỉnh Lâm Đồng</option>

                    <option value="35TTT">Tỉnh Hà Nam</option>

                    <option value="48TTT">Thành phố Đà Nẵng</option>

                    <option value="70TTT">Tỉnh Bình Phước</option>

                    <option value="49TTT">Tỉnh Quảng Nam</option>

                    <option value="38TTT">Tỉnh Thanh Hóa</option>

                    <option value="84TTT">Tỉnh Trà Vinh</option>

                    <option value="11TTT">Tỉnh Điện Biên</option>

                    <option value="27TTT">Tỉnh Bắc Ninh</option>

                    <option value="30TTT">Tỉnh Hải Dương</option>

                    <option value="46TTT">Tỉnh Thừa Thiên Huế</option>

                    <option value="67TTT">Tỉnh Đắk Nông</option>

                    <option value="44TTT">Tỉnh Quảng Bình</option>

                    <option value="22TTT">Tỉnh Quảng Ninh</option>

                    <option value="33TTT">Tỉnh Hưng Yên</option>

                    <option value="96TTT">Tỉnh Cà Mau</option>

                    <option value="10TTT">Tỉnh Lào Cai</option>

                    <option value="56TTT">Tỉnh Khánh Hòa</option>

                    <option value="40TTT">Tỉnh Nghệ An</option>

                    <option value="12TTT">Tỉnh Lai Châu</option>

                    <option value="72TTT">Tỉnh Tây Ninh</option>

                    <option value="86TTT">Tỉnh Vĩnh Long</option>

                    <option value="24TTT">Tỉnh Bắc Giang</option>

                    <option value="04TTT">Tỉnh Cao Bằng</option>

                    <option value="15TTT">Tỉnh Yên Bái</option>

                    <option value="52TTT">Tỉnh Bình Định</option>

                    <option value="01TTT">Thành phố Hà Nội</option>

                    <option value="06TTT">Tỉnh Bắc Kạn</option>
                </select>
                <div class="invalid-feedback">Nơi cấp không hợp lệ hoặc chưa chọn</div>
            </div>
            <div class="col-md-4 form-group">
                <label for="inputDateCMND">Ngày Cấp <span style="color : red">*</span></label>
                <input autocomplete="off" th:field="*{validFrom}" class="form-control" id="inputDateCMND" required type="text">
                <div class="invalid-feedback">
                    Ngày cấp CMND không hợp lệ hoặc để trống
                </div>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-6 form-group">
                <label for="inputPhone">Điện thoại <span style="color : red">*</span></label>
                <input th:field="*{phoneNumber}" pattern="((09|03|07|08|05)+([0-9]{8})\b)" class="form-control" id="inputPhone" required type="tel">
                <div class="invalid-feedback">
                    Số điện thoại không hợp lệ hoặc để trống
                </div>
            </div>
            <div class="col-md-6 form-group">
                <label for="inputEmail">Email <span style="color : red">*</span></label>
                <input th:field="*{email}" pattern="^[a-z][a-z0-9_\.]{5,32}@[a-z0-9]{2,}(\.[a-z0-9]{2,4}){1,2}$" class="form-control" id="inputEmail" required type="text">
                <div class="invalid-feedback">
                    Email không hợp lệ hoặc để trống
                </div>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-8 form-group">
                <label for="inputWorkplace">Cơ quan làm việc <span style="color : red">*</span></label>
                <input th:field="*{workplace}" minlength="2" maxlength="50" pattern="^[a-zA-Z0-9_ÀÁÂÃÈÉÊÌÍÒÓÔÕÙÚĂĐĨŨƠàáâãèéêìíòóôõùúăđĩũơƯĂẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼỀỀỂưăạảấầẩẫậắằẳẵặẹẻẽềềểỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪễệỉịọỏốồổỗộớờởỡợụủứừỬỮỰỲỴÝỶỸửữựỳỵỷỹ\s]+$" class="form-control" id="inputWorkplace" required type="text">
                <div class="invalid-feedback">
                    Cơ quan làm việc không hợp lệ hoặc để trống
                </div>
            </div>
            <div class="col-md-4 form-group">
                <label for="inputZone">Vùng <span style="color : red">*</span></label>
                <select th:field="*{zone}" class="custom-select" id="inputZone" required>
                    <option value="">Chọn vùng</option>
                    <option value=1>Vùng 1</option>
                    <option value=2>Vùng 2</option>
                    <option value=2>Vùng 3</option>
                    <option value=2>Vùng 4</option>
                </select>
                <div class="invalid-feedback">
                    Vùng không hợp lệ hoặc chưa chọn
                </div>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-4 form-group">
                <label for="inputSalary">Lương (VNĐ) <span style="color : red">*</span></label>
                <input th:field="*{salary}" maxlength="15" class="form-control" id="inputSalary" required type="text">
                <div class="invalid-feedback">
                    Lương không hợp lệ hoặc để trống
                </div>
            </div>
            <div class="col-md-4 form-group">
                <label for="inputPC">Phụ cấp (VNĐ) <span style="color : red">*</span></label>
                <input th:field="*{pc}" maxlength="15" class="form-control" id="inputPC" required type="text">
                <div class="invalid-feedback">
                    Phụ cấp không hợp lệ hoặc để trống
                </div>
            </div>
            <div class="col-md-4 form-group">
                <label for="inputHT">Hỗ trợ (VNĐ) <span style="color : red">*</span></label>
                <input th:field="*{ht}" maxlength="15" class="form-control" id="inputHT" required type="text">
                <div class="invalid-feedback">
                    Hỗ trợ không hợp lệ hoặc để trống
                </div>
            </div>
        </div>
        <fieldset>
            <legend>Địa chỉ thường trú</legend>
            <div class="form-row">
                <div class="col-md-6 form-group">
                    <label for="inputCity">Tỉnh/Thành phố <span style="color : red">*</span></label>
                    <select th:field="*{address.tinh}" data-style="''" data-style-base="form-control" class="form-control" id="inputCity" data-live-search="true" data-live-search-style="contains" data-live-search-normalize="true" data-size="7" required>
                        <option value="">- Chọn tỉnh -</option>

                        <option value="92TTT">Thành phố Cần Thơ</option>

                        <option value="91TTT">Tỉnh Kiên Giang</option>

                        <option value="75TTT">Tỉnh Đồng Nai</option>

                        <option value="20TTT">Tỉnh Lạng Sơn</option>

                        <option value="89TTT">Tỉnh An Giang</option>

                        <option value="34TTT">Tỉnh Thái Bình</option>

                        <option value="62TTT">Tỉnh Kon Tum</option>

                        <option value="45TTT">Tỉnh Quảng Trị</option>

                        <option value="58TTT">Tỉnh Ninh Thuận</option>

                        <option value="74TTT">Tỉnh Bình Dương</option>

                        <option value="37TTT">Tỉnh Ninh Bình</option>

                        <option value="31TTT">Thành phố Hải Phòng</option>

                        <option value="95TTT">Tỉnh Bạc Liêu</option>

                        <option value="08TTT">Tỉnh Tuyên Quang</option>

                        <option value="14TTT">Tỉnh Sơn La</option>

                        <option value="36TTT">Tỉnh Nam Định</option>

                        <option value="25TTT">Tỉnh Phú Thọ</option>

                        <option value="42TTT">Tỉnh Hà Tĩnh</option>

                        <option value="93TTT">Tỉnh Hậu Giang</option>

                        <option value="82TTT">Tỉnh Tiền Giang</option>

                        <option value="66TTT">Tỉnh Đắk Lắk</option>

                        <option value="80TTT">Tỉnh Long An</option>

                        <option value="17TTT">Tỉnh Hòa Bình</option>

                        <option value="87TTT">Tỉnh Đồng Tháp</option>

                        <option value="19TTT">Tỉnh Thái Nguyên</option>

                        <option value="83TTT">Tỉnh Bến Tre</option>

                        <option value="54TTT">Tỉnh Phú Yên</option>

                        <option value="26TTT">Tỉnh Vĩnh Phúc</option>

                        <option value="94TTT">Tỉnh Sóc Trăng</option>

                        <option value="60TTT">Tỉnh Bình Thuận</option>

                        <option value="51TTT">Tỉnh Quảng Ngãi</option>

                        <option value="64TTT">Tỉnh Gia Lai</option>

                        <option value="77TTT">Tỉnh Bà Rịa - Vũng Tàu</option>

                        <option value="79TTT">Thành phố Hồ Chí Minh</option>

                        <option value="02TTT">Tỉnh Hà Giang</option>

                        <option value="68TTT">Tỉnh Lâm Đồng</option>

                        <option value="35TTT">Tỉnh Hà Nam</option>

                        <option value="48TTT">Thành phố Đà Nẵng</option>

                        <option value="70TTT">Tỉnh Bình Phước</option>

                        <option value="49TTT">Tỉnh Quảng Nam</option>

                        <option value="38TTT">Tỉnh Thanh Hóa</option>

                        <option value="84TTT">Tỉnh Trà Vinh</option>

                        <option value="11TTT">Tỉnh Điện Biên</option>

                        <option value="27TTT">Tỉnh Bắc Ninh</option>

                        <option value="30TTT">Tỉnh Hải Dương</option>

                        <option value="46TTT">Tỉnh Thừa Thiên Huế</option>

                        <option value="67TTT">Tỉnh Đắk Nông</option>

                        <option value="44TTT">Tỉnh Quảng Bình</option>

                        <option value="22TTT">Tỉnh Quảng Ninh</option>

                        <option value="33TTT">Tỉnh Hưng Yên</option>

                        <option value="96TTT">Tỉnh Cà Mau</option>

                        <option value="10TTT">Tỉnh Lào Cai</option>

                        <option value="56TTT">Tỉnh Khánh Hòa</option>

                        <option value="40TTT">Tỉnh Nghệ An</option>

                        <option value="12TTT">Tỉnh Lai Châu</option>

                        <option value="72TTT">Tỉnh Tây Ninh</option>

                        <option value="86TTT">Tỉnh Vĩnh Long</option>

                        <option value="24TTT">Tỉnh Bắc Giang</option>

                        <option value="04TTT">Tỉnh Cao Bằng</option>

                        <option value="15TTT">Tỉnh Yên Bái</option>

                        <option value="52TTT">Tỉnh Bình Định</option>

                        <option value="01TTT">Thành phố Hà Nội</option>

                        <option value="06TTT">Tỉnh Bắc Kạn</option>
                    </select>
                    <div class="invalid-feedback">Tỉnh/Thành phố không hợp lệ hoặc để trống</div>
                </div>
                <div class="col-md-6 form-group">
                    <label for="inputProvince">Quận/Huyện <span style="color : red">*</span></label>
                    <select th:field="*{address.huyen}" data-style="''" data-style-base="form-control" class="form-control" data-live-search="true" data-live-search-style="contains" data-live-search-normalize="true" data-size="7" id="inputProvince" required>
                        <option value="">Chọn Quận/Huyện</option>
                    </select>
                    <div class="invalid-feedback">Quận/Huyện không hợp lệ hoặc chưa chọn</div>
                </div>
            </div>
            <div class="form-row">
                <div class="col-md-6 form-group">
                    <label for="inputPX">Phường/Xã <span style="color : red">*</span></label>
                    <select th:field="*{address.phuong}" data-style="''" data-style-base="form-control" class="form-control" data-live-search="true" data-live-search-style="contains" data-live-search-normalize="true" data-size="7" id="inputPX" required>
                        <option value="">Chọn Phường/Xã</option>
                    </select>
                    <div class="invalid-feedback">Phường/Xã không hợp lệ hoặc chưa chọn</div>
                </div>
                <div class="col-md-6 form-group">
                    <label for="inputTX">Thôn/Xóm <span style="color : red">*</span></label>
                    <select th:field="*{address.xa}" data-style="''" data-style-base="form-control" class="form-control" data-live-search="true" data-live-search-style="contains" data-live-search-normalize="true" data-size="7" id="inputTX" required>
                        <option value="">Chọn Thôn/Xóm</option>
                    </select>
                    <div class="invalid-feedback">Thôn/Xóm không hợp lệ hoặc chưa chọn</div>
                </div>
            </div>
        </fieldset>
        <button class="btn btn-primary" type="submit">Đăng kí</button>
        <a id="cancel" class="btn btn-danger" href="#" style="color: #fff;">Hủy</a>
    </form>
</div>
</body>
<script>
    // Example starter JavaScript for disabling form submissions if there are invalid fields
    (function () {
        'use strict';
        window.addEventListener('load', function () {
            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            var forms = document.getElementsByClassName('needs-validation');
            // Loop over them and prevent submission
            var regex = "/((09|03|07|08|05)+([0-9]{8})\b)/g";
            var validation = Array.prototype.filter.call(forms, function (form) {
                form.addEventListener('submit', function (event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();
</script>
<script th:src="@{/bootstrap/js/jquery-3.3.1.slim.min.js}" type="text/javascript"></script>
<script th:src="@{/bootstrap/js/popper.min.js}" type="text/javascript"></script>
<script th:src="@{/bootstrap/js/bootstrap.min.js}" type="text/javascript"></script>
<script th:src="@{/bootstrap/js/custom.js}" type="text/javascript" charset="UTF-8"></script>
<script th:src="@{/bootstrap-datepicker/js/bootstrap-datepicker.min.js}" type="text/javascript"></script>
<script th:src="@{/bootstrap-select/js/bootstrap-select.min.js}" type="text/javascript"></script>
<script th:src="@{/bootstrap-select/js/i18n/defaults-vi_VN.min.js}" type="text/javascript"></script>
<script charset="UTF-8" th:src="@{/bootstrap-datepicker/js/locales/bootstrap-datepicker.vi.min.js}"></script>
<script type="text/javascript" th:src="@{/bootstrap/js/cleave.js}"></script>
<script type="text/javascript" th:src="@{/bootstrap/js/sa.min.js}"></script>
<script>
    $('#inputDateCMND,#inputDateBirth').datepicker({
        format: "dd/mm/yyyy",
        weekStart: 1,
        clearBtn: true,
        endDate: "+0d",
        language: "vi",
        todayHighlight: true,
        orientation: "bottom left",
        autoclose: true
    });
    c = new Cleave('#inputSalary', {
        numeral: true,
        numeralDecimalMark: ',',
        delimiter: '.',
        numeralPositiveOnly: true
    });
    new Cleave('#inputPC', {
        numeral: true,
        numeralDecimalMark: ',',
        delimiter: '.',
        numeralPositiveOnly: true
    });
    new Cleave('#inputHT', {
        numeral: true,
        numeralDecimalMark: ',',
        delimiter: '.',
        numeralPositiveOnly: true
    });
    $('.selectpicker').selectpicker();
</script>
<script>

    $('#cancel').on('click', function () {
        Swal.fire({
            title: 'Bạn có chắc muốn hủy?',
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Có!'
        }).then((result) => {
            if (result.value) {
                window.location.href = "/";
                console.log("GO HOME")
            }
        })
    });
    var elname = $('#inputName');
    elname.on('input', function() {
        var text = elname.val();
        var trimText = text.trim();
        if (trimText.length === 0) {
            elname.val(trimText);
        }
    });
    var elWorkplace = $('#inputWorkplace');
    elWorkplace.on('input', function() {
        var text = elWorkplace.val();
        var trimText = text.trim();
        if (trimText.length === 0) {
            elWorkplace.val(trimText);
        }
    });
    var city = $('#inputCity').val();
    console.log(city);
    if (city !== "") getProvince();
    $(document).ready(function() {
        $('#inputName').focus();
        // $("#inputProvince").prop('disabled', 'disabled');
        // $("#inputPX").prop('disabled', 'disabled');
        // $("#inputTX").prop('disabled', 'disabled');
    });
</script>
</html>